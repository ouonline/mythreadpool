# This Makefile is generated by omake: https://github.com/ouonline/omake.git

CXX := g++

ifeq ($(debug), y)
	CXXFLAGS += -g
else
	CXXFLAGS += -O2 -DNDEBUG
endif

TARGET := test_threadpool

.PHONY: all clean

all: $(TARGET)

.PHONY: omake_phony_0

omake_phony_0:
	$(MAKE) debug=$(debug) libthreadpool_static.a -C ..

omake_dep_0_INCLUDE := -I../..

thread_pool_test.cpp.omake_dep_0.o: thread_pool_test.cpp
	$(CXX) $(CXXFLAGS) -Wall -Werror -Wextra -fPIC $(omake_dep_0_INCLUDE) -c $< -o $@

test_threadpool_OBJS := thread_pool_test.cpp.omake_dep_0.o

test_threadpool_LIBS := ../libthreadpool_static.a -lpthread

test_threadpool: $(test_threadpool_OBJS) | omake_phony_0
	$(CXX) $(CXXFLAGS) -fPIC -Wextra -Werror -Wall -o $@ $^ $(test_threadpool_LIBS)

clean:
	rm -f $(TARGET) $(test_threadpool_OBJS)
